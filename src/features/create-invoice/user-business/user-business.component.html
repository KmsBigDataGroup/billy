<div class="user-business">
  <modal [isVisible]="isEditOpen" [disabled]="!businessForm.form.valid" (onClose)="closeModal()" (onSuccess)="handleEditEnd(businessForm.form)">
    <span class="modal-title">Edit your business</span>
    <div class="modal-body">
      <form #businessForm="ngForm">
        <div class="form-group row" [class.has-danger]="name.invalid && name.dirty">
          <label class="col-sm-4 col-form-label" for="business-name">Business Name *</label>
          <div class="col-sm-8">
            <input [(ngModel)]="model.name" name="name" #name="ngModel" class="form-control" type="text" required>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 col-form-label" for="business-vat">VAT Number</label>
          <div class="col-sm-8">
            <input [(ngModel)]="model.vat" name="vat" class="form-control" type="number">
          </div>
        </div>

        <fieldset>
          <legend>Address</legend>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label" for="address">Address</label>
            <div class="col-sm-8">
              <input [(ngModel)]="model.address" name="address" class="form-control" type="text">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label" for="address-city">City</label>
            <div class="col-sm-8">
              <input [(ngModel)]="model.city" name="city" class="form-control" type="text">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label" for="address-zip">Postal / Zip Code</label>
            <div class="col-sm-8">
              <input [(ngModel)]="model.zip" name="zip" class="form-control" type="number">
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label" for="address-country">Country</label>
            <div class="col-sm-8">
              <select
                [(ngModel)]="model.country"
                name="country"
                #country
                (change)="handleCountryChange(country.value)"
                class="form-control"
              >
                <option *ngFor="let country of countries" [value]="country.countryCode">
                  {{country.name}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-4 col-form-label" for="address-province">State / Province</label>
            <div class="col-sm-8">
              <select [(ngModel)]="model.province" name="province" class="form-control">
                <option *ngFor="let province of provinces" [value]="province.name">
                  {{province.name}}
                </option>
              </select>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </modal>
  <p><span class="name">{{user.name}}</span></p>
  <p>{{user.address}}</p>
  <p>
    <span>{{user.zip}}</span>
    <span>{{user.city}}</span>
    <span [hidden]="!user.province">({{user.province}})</span>
  </p>
  <p>{{user.vat}}</p>
  <a (click)="handleEdit()">Edit your business details</a>
</div>
